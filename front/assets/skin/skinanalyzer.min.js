$(document).ready(function(){var e=window,a=document,n=a.documentElement,t=a.getElementsByTagName("body")[0],o=e.innerWidth||n.clientWidth||t.clientWidth;e.innerHeight||n.clientHeight||t.clientHeight;if($("#camera-screen").size()>0){var s="",r=o<=768?400:640,i=o<=768?720:480;Webcam.set({width:r,height:i,dest_width:r,dest_height:i,crop_width:400,crop_height:400,image_format:"jpeg",jpeg_quality:90}),Webcam.attach("#camera-screen"),Webcam.on("error",function(e){alert(e)}),$(".take-photo-analyzer").click(function(){var e=$(this).find(".fa");e.removeClass("fa-camera"),e.addClass("fa-spin"),e.addClass("fa-spinner"),Webcam.snap(function(a){s=a,document.getElementById("camera-result").innerHTML='<img src="'+a+'"/>',e.addClass("fa-camera"),e.removeClass("fa-spin"),e.removeClass("fa-spinner"),$(".take-photo-analyzer").hide(),$("#continue-analyzer").show(),$("#retake-analyzer").show()})}),$("#retake-analyzer").click(function(){$(".take-photo-analyzer").show(),$("#continue-analyzer").hide(),$("#retake-analyzer").hide(),$("#camera-result").html("")}),$("#continue-analyzer").click(function(){var e=$(this),a=e.html();return e.html('<i class="fa fa-spinner fa-spin"></i>'),$.ajax({type:"post",url:baseurl+"tools/save_analyzer",data:{image:s},dataType:"json",success:function(n){console.log(n),200==n.code?location.href=n.url:(e.html(a),swal("Ops",n.msg,"error"))},error:function(n){console.log(n),e.html(a),swal("Ops",_lang("error-unknown"),"error")}}),!1})}var l=!1;$(".yesno").click(function(){if(1==l)return!1;l=!0;var e=$(this),a=$(this).data("answer"),n=$(this).find(".text").html(),t=$("#submission_id").val(),o=$("#question_id").val();e.find(".text").html('<i class="fa fa-spinner fa-spin"></i>'),$.ajax({type:"post",url:baseurl+"tools/get_next_question",data:{submission_id:t,question_id:o,answer:a},dataType:"json",success:function(a){console.log(a),l=!1,e.find(".text").html(n),201==a.code?location.href=a.url:200==a.code?(console.log(a.quest),$("#goback-button").show(),0==a.quest.parent_id&&$("#goback-button").hide(),$("#question_id").val(a.quest.id),$("#analyzer-question").html(a.quest.question)):300==a.code?$("#goback-button").hide():swal("Ops",a.msg,"error")},error:function(a){console.log(a),l=!1,e.find(".icon").html(n),swal("Ops",_lang("error-unknown"),"error")}})}),$(".skip-analyzer").click(function(){var e=$(this);e.html('<i class="fa fa-spin fa-spinner"></i>'),$.ajax({type:"POST",url:baseurl+"tools/skip_analyzer",dataType:"json",success:function(a){console.log(a),e.html("SKIP &rarr;"),200==a.code?location.href=a.url:swal("Ops",a.msg,"error")},error:function(a){console.log(a),e.html("SKIP &rarr;")}})})});